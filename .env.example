# ============================================================================
# GrepZilla Environment Configuration
# Copy this file to .env and customize for your environment
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------

# Environment: development, staging, production
APP_ENV=development

# Enable debug mode (set to false in production)
DEBUG=true

# ----------------------------------------------------------------------------
# PostgreSQL Database
# ----------------------------------------------------------------------------

POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=grepzilla
POSTGRES_PORT=5432

# Full database URL (auto-constructed in docker-compose, set manually for local dev)
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/grepzilla

# Connection pool settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10

# ----------------------------------------------------------------------------
# Redis (Celery broker & result backend)
# ----------------------------------------------------------------------------

REDIS_PORT=6379
REDIS_INSIGHT_PORT=8001

# Redis URLs (auto-constructed in docker-compose, set manually for local dev)
# REDIS_URL=redis://localhost:6379/0
# REDIS_RESULT_BACKEND=redis://localhost:6379/1

# ----------------------------------------------------------------------------
# Meilisearch
# ----------------------------------------------------------------------------

MEILISEARCH_PORT=7700
MEILISEARCH_API_KEY=masterKey
MEILISEARCH_INDEX_PREFIX=grepzilla

# Meilisearch environment: development or production
MEILI_ENV=development

# Meilisearch URL (auto-constructed in docker-compose, set manually for local dev)
# MEILISEARCH_URL=http://localhost:7700

# ----------------------------------------------------------------------------
# JWT Authentication
# ----------------------------------------------------------------------------

# IMPORTANT: Change this in production!
JWT_SECRET_KEY=change-me-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ----------------------------------------------------------------------------
# Git Provider
# ----------------------------------------------------------------------------

# Git provider type: github, gitlab, bitbucket
GIT_PROVIDER_TYPE=github

# Personal access token for Git provider API
# GIT_PROVIDER_TOKEN=your-token-here

# ----------------------------------------------------------------------------
# API Server
# ----------------------------------------------------------------------------

API_PORT=8000
API_WORKERS=1

# ----------------------------------------------------------------------------
# Celery Workers
# ----------------------------------------------------------------------------

# Number of concurrent worker processes
CELERY_CONCURRENCY=4

# ----------------------------------------------------------------------------
# Migration Settings
# ----------------------------------------------------------------------------

# Maximum retries for waiting on dependencies
MAX_RETRIES=30

# Retry interval in seconds
RETRY_INTERVAL=2
